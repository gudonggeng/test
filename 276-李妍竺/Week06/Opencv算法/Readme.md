# **Sift**

**Scale Invariant Feature Transform: 关键特征点检测**

SIFT提取图像的**局部特征**，在尺度空间寻找**极值点**，并提取出其**位置**，**尺度**，**方向**信息。

## 特征提取与匹配的具体步骤：
**1. 生成高斯差分金字塔（DOG金字塔），尺度空间构建**
   - **高斯金字塔 ——> DOG金字塔 ——> 尺度空间构建**

**2. 空间极值点检测**
   - 中间点检测要与同尺度的8个相邻点以及上下两层，共26个点比较
   - 为防止上下两层少点，直接多加两层DOG，即多加3层高斯金字塔的图
   - 根据需要的层数s，通常3-5来确定k以及O

**3. 稳定关键点的精确定位**：利用阈值：opencv中的constrastThreshold

**4. 关键点描述**：为每一个关键点建立一个描述符。用一组向量将这个关键点描述出来，使其不随各种变化而变化。

**5. 特征点匹配**：计算两组特征点的128维关键点的欧氏距离实现。欧氏距离越小，相似度越高，当欧式距离小于设定的阈值，可以判定匹配成功。
   -  具体步骤：1. 分别对模板图（参考图）和实时图（观测图）建立关键点描述子集合。通过欧式距离比较。 2. 匹配采取穷举法完成。

## 高斯金字塔中的比例系数k

$$k=2^{\frac1s}$$

s:检测s个尺度的极值点（需要多少层） （通常3-5）

设高斯金字塔共有O组图像，每组图像S+3层：
$$O=\log_{2}(min{M,N})-3$$
其中，M,N为原始图像的行数和列数。


# 最小二乘法

**Least Square Method**
通过最小化误差的平方和，寻找数据的最佳函数匹配。

**三种范数：**
1. $\infty$-范数：残差绝对值得最大值，所有数据点中残差距离的最大值：
   $$max_{1\leqslant i\leqslant m}|r_{i}|$$
2. 1-范数：绝对残差和。所有数据点残差距离之和：
   $$\sum^m_{i=1}|r_{i}|$$
3. **2_范数**：**残差平方和**：
   $$\sum^m_{i=1}r^2_{i}$$

**残差**：
$$r_{i}=h(x_{i})-y_{i}$$

拟合程度： 拟合函数h(x)与待求解的函数y之间的**相似性**。
**范数越小，相似性越高**。


# ransac
**随机采样一致性（random sample consensus)**

一个非确定性算法，产生一个在一定概率下合理的结果，允许使用更多次的迭代来使其概率增加。

**RANSAC假定，给定一组（通常很小）内群，存在一个程序，这个程序可以估算最佳解释解释或最适用于之一数据模型的参数。**

## RANSAC步骤
**RANSAC的输入：**
1. 一组观测数据（往往含有较大的噪声或无效点）
2. 一个用于解释观测数据的参数化模型，如：y=ax+b
3. 一些可信的参数

**RANSAC的步骤：**
1. 在数据中随机选择几个点设定为内群
2. 计算适合内群的模型 e.g. y=ax+b  -> y=2x+3 y=4x+5
3. 把其他刚才没选到的点带入刚才建立的模型中，计算是否为内群点。 hi=2xi+3 -> ri 小于多少为内群
4. 记下内群数量
5. 重复步骤
6. 比较哪次计算中内群数量最多，内群数量最多的那次所建的模型就是要求的解。


# 哈希
相似图像搜索的哈希算法有三种：
1. 均值哈希算法 **aHash**
2. 差值哈希算法 **dHash**
3. 感知哈希算法 **pHash**

哈希函数-**加密函数**，两个特点：
1. 不可逆。
2. 输出值唯一性和不可预测性。

**汉明距离**：  
两个整数之间的汉明距离指这两个数字对应**二进制不同的位置**的数目。


**均值哈希算法：**
1. 缩放：图片缩放为8* 8，保留结构，出去细节。
2. 灰度化
3. **求平均值：计算灰度图所有像素平均值**
4. **比较：像素值大于平均值记作1，相反记作0，共64位**
5. 生成Hash:将上述1 0 按顺序组合起来，即为指纹（Hash）
6. 对比指纹：对比两幅图的指纹，计算汉明距离，64位种，有多少位不一样，不一样的越少，图片越相似。 

**差值哈希算法：**
1. 缩放：图片缩放为8* 9，保留结构，出去细节。
2. 灰度化
3. **比较：像素值大于后一个像素值记作1，相反记作0，每行9个像素，8个插值，共8行。本行不和下一行比。共64位。**
4. 生成Hash:将上述1 0 按顺序组合起来，即为指纹（Hash）
5. 对比指纹：对比两幅图的指纹，计算汉明距离，64位种，有多少位不一样，不一样的越少，图片越相似。


一般8以下，认为是很相似的。
